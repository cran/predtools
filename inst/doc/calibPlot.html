<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Calibration Plot</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Calibration Plot</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(predtools)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;dplyr&#39;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:stats&#39;:</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:base&#39;:</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<div id="what-is-calibration-plot" class="section level2">
<h2>What is calibration plot?</h2>
<p>Calibration plot is a visual tool to assess the agreement between
predictions and observations in different percentiles (mostly deciles)
of the predicted values.</p>
<p><code>calibration_plot</code> function constructs calibration plots
based on provided predictions and observations columns of a given
dataset. Among other options implemented in the function, one can
evaluate prediction calibration according to a grouping factor (or even
from multiple prediction models) in one calibration plot.</p>
</div>
<div id="a-step-by-step-guide." class="section level2">
<h2>A step-by-step guide.</h2>
<p>Imagine the variable y indicates risk of disease recurrence in a unit
of time. We have a prediction model that quantifies this risk given a
patientâ€™s age, disease severity level, sex, and whether the patient has
a comorbidity.</p>
<p>The package comes with two exemplary datasets. <code>dev_data</code>
and <code>val_data</code>. We use the dev_data as the development sample
and the <code>val_data</code> as the external validation sample.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(dev_data)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(val_data)</span></code></pre></div>
<p><code>dev_data</code> has 500 rows. <code>val_data</code> has 400
rows.</p>
<p>Here are the first few rows of <code>dev_data</code>:</p>
<table>
<thead>
<tr class="header">
<th align="right">age</th>
<th align="right">severity</th>
<th align="right">sex</th>
<th align="right">comorbidity</th>
<th align="right">y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">55</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">52</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">63</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">61</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">58</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">54</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">45</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>We use the development data to fit a logistic regression model as our
risk prediction model:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>reg <span class="ot">&lt;-</span> <span class="fu">glm</span>(y<span class="sc">~</span>sex<span class="sc">+</span>age<span class="sc">+</span>severity<span class="sc">+</span>comorbidity,<span class="at">data=</span>dev_data,<span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link=</span><span class="st">&quot;logit&quot;</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(reg)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; glm(formula = y ~ sex + age + severity + comorbidity, family = binomial(link = &quot;logit&quot;), </span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     data = dev_data)</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coefficients:</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (Intercept) -1.728929   0.565066  -3.060  0.00222 ** </span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; sex          0.557178   0.223631   2.492  0.01272 *  </span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; age          0.005175   0.010654   0.486  0.62717    </span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; severity    -0.557335   0.227587  -2.449  0.01433 *  </span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; comorbidity  1.091936   0.209944   5.201 1.98e-07 ***</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Null deviance: 602.15  on 499  degrees of freedom</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Residual deviance: 560.41  on 495  degrees of freedom</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; AIC: 570.41</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Number of Fisher Scoring iterations: 4</span></span></code></pre></div>
<p>Given this, our risk prediction model can be written as:</p>
<p><span class="math inline">\(\bf{
logit(p)=-1.7289+0.5572*sex+0.0052*age-0.5573*severity+1.0919*comorbidity}\)</span>.</p>
<p>Now, we can create the calibration plot in development and validation
datasets by using <code>calibration_plot</code> function.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>dev_data<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict.glm</span>(reg, <span class="at">type =</span> <span class="st">&#39;response&#39;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>val_data<span class="sc">$</span>pred <span class="ot">&lt;-</span> <span class="fu">predict.glm</span>(reg, <span class="at">newdata =</span> val_data, <span class="at">type =</span> <span class="st">&#39;response&#39;</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">calibration_plot</span>(<span class="at">data =</span> dev_data, <span class="at">obs =</span> <span class="st">&quot;y&quot;</span>, <span class="at">pred =</span> <span class="st">&quot;pred&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Calibration plot for development data&quot;</span>, <span class="at">y_lim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.7</span>), <span class="at">x_lim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.7</span>))</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $calibration_plot</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calibration_plot</span>(<span class="at">data =</span> val_data, <span class="at">obs =</span> <span class="st">&quot;y&quot;</span>, <span class="at">pred =</span> <span class="st">&quot;pred&quot;</span>, <span class="at">y_lim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">x_lim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">title =</span> <span class="st">&quot;Calibration plot for validation data&quot;</span>, <span class="at">group =</span> <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $calibration_plot</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
